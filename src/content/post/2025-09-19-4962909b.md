---
title: "daikon.vim #3に参加した"
date: 2025-09-19
topics: ["vim", "#daikonvim"]
excerpt: ''
type: tech
---

[daikon.vim #3](https://daikonvim.connpass.com/event/367291/)に参加した。

中身はもくもく会である。

## やったこと

### 落ちてるCIの調査

<https://github.com/Omochice/nur-packages/actions/runs/17847817893/job/50750643149#step:5:1>

> ```console
> Run CHANGES=$(git diff --name-only _sources/generated.json _sources/generated.nix)
>   CHANGES=$(git diff --name-only _sources/generated.json _sources/generated.nix)
>   if [ -n "$CHANGES" ]; then
>     echo "$CHANGES" >&2
>     exit 1
>   fi
>   shell: /usr/bin/bash -e {0}
>   env:
>     NIX_PATH: nixpkgs=https://github.com/NixOS/nixpkgs/archive/refs/heads/nixpkgs-unstable.tar.gz
>     TMPDIR: /home/runner/work/_temp
> _sources/generated.nix
> ```

これがなぜか調査する。


`echo`しても`--name-only`なのでファイル名しかわからないのでもう一度`git diff`させるようにした。

[ci: show diff when fail job by Omochice · Pull Request #264 · Omochice/nur-packages](https://github.com/Omochice/nur-packages/pull/264)

```console
Run CHANGES=$(git diff --name-only _sources/generated.json _sources/generated.nix)
diff --git a/_sources/generated.nix b/_sources/generated.nix
index 3c82a51..c3b5969 100644
--- a/_sources/generated.nix
+++ b/_sources/generated.nix
@@ -1,10 +1,5 @@
 # This file was generated by nvfetcher, please do not modify it manually.
-{
-  fetchgit,
-  fetchurl,
-  fetchFromGitHub,
-  dockerTools,
-}:
+{ fetchgit, fetchurl, fetchFromGitHub, dockerTools }:
 {
   ccusage = {
     pname = "ccusage";
```

どうやらnvfetcherのバージョンが固定できてないのがよくなさそう。

CIでnixpkgsを`nixos-unstable`や`nixpkgs-unstable`のmatrixで実行してるので、個々の環境でそれぞれの`nvfetcher`をしてdiffがでてしまったようだ。

[chore: pin nvfetcher by Omochice · Pull Request #265 · Omochice/nur-packages](https://github.com/Omochice/nur-packages/pull/265)

これでなおった。

### ddu-source-redmineの整理

[Omochice/ddu-source-redmine: Redmine source for ddu.vim (WIP)](https://github.com/Omochice/ddu-source-redmine)

[ddu.vim](https://github.com/Shougo/ddu.vim)のsourceとして使えるプラグインがあるのだが、ticketのタイトルを本文を同時に更新できるようにしたい。

こっちはまだ完成していない。
